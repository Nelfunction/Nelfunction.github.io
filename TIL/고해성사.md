- 22.09.18
    - docker 컨테이너 내부에서 EC2 로컬호스트 포트에 접근하는 경우
        
        그냥 localhost를 쓰면 안된다. 컨테이너의 네트워크 모드에 따라서 자체적인 네트워크 환경을 가지는 경우가 있기 때문에… localhost를 그대로 쓰려면 add-host 옵션으로 localhost가 host-gateway에 매칭되게 해야 하고, 다른 컨테이너에 접근하려면 도커 네트워크 ip를 알아야 한다. 일반적으로 172.17.0.*를 쓰는것 같더라~
        
- 22.09.21
    - fastapi docker 이미지를 만드는 과정에서..
        
        WORKDIR/app 폴더에 복사했더니 커스텀 모듈 import를 하지 못했다..
        
        WORKDIR 루트에서 main:app으로 실행가능하게 바꾸어 주었더니 해결되었다.
        
        requirements.txt 를 제때 업데이트해주지 못해서 1시간을 헛돌았다. 백엔드 개발자들에게 자체적으로 목록 파일을 만들어 달라고 하는게 좋겠다.
        
    - docker-compose 사용
        
        dockerfile을 써서 build를 할때 COPY와 volume을 함께 쓰는것은 조심해야 한다고 하더라~
        
- 22.09.23
    - 405 Method not allowed
        
        url을 틀려서 생긴 문제였다. regist를 register로 썻다. 405는 보통 다 이런 문제인듯
        
- 22.10.02
    - docker compose in docker
        - A컨테이너 안에서 docker-compose로 B컨테이너를 실행시키는과정에서
            - A컨테이너에 docker-compose로 mount 해준 volume을
            - B컨테이너를 실행시키는 docker-compose에서 volume 옵션으로 참조하면
            - 파일이 존재하지 않는것으로 인식한다.(docker compose 자체는 오류없이 실행됨)
        - 신기한 점은 A컨테이너 밖에서 동일한 커맨드를 실행하면 잘 작동하지만, A컨테이너 안에서 실행하면 작동하지 않는다는 점.
        - 해결법은 다음과 같다.
            - A컨테이너에 docker-compose로 mount 해준 volume내의 파일을
            - B컨테이너를 실행시키는 docker-compose에서 실행하는 Dockerfile에서
            - 원래 연결하려던 디렉토리로 COPY해준다.
        - 스택오버플로우에도 올리고 코치분께 질문도 하고 하루죙일 개짓거리했다
    - CORS
        - 거지같은 동일 출처 정책
        - 보통 서버쪽에서 허용 목록을 와일드카드(*)로 해주면 다 해결된다.
        - 근데 인증 정보(로그인 때 받아오는 토큰같은 것들)이 포함된 요청은 와일드카드로 반환하면 안된다고 한다. 서버에서 괜찮다는데 뭐가 문제란 말이냐
        - withCredential 설정을 건드리는 것으로 해결된다고도 하고, 허용 목록을 와일드카드 말고 배포 도메인이랑 localhost로 해주면 해결될것 같았지만
        - 그냥 리액트쪽에서 proxy 설정을 해주는걸로 퉁쳤다.
        - 덤으로 fastapi쪽에서 cors middleware로 설정해준 allow-cors 와일드카드는 postman으로 요청했을때에는 헤더에 안보였다. nginx 를 한번 거쳐서 그럴까?→header에 origin이 명시되어있는경우에만 보내주더라.
- 22.10.20
    - React 에서 썻던 format on save 설정 등등이 fastapi의 black(formtter)와 flake8(linting)에 영향을 좀 미치더라..
    - vscode 로컬 세팅을 애용하면 앞으로 이런 일이 없을듯.
- 22.10.23
    - ec2 인스턴스 생성후 .pem 파일로 접속하려 했으나 ‘server refused our key’와 함께 침몰
    - keygen 프로그램들로 .ppk파일로 변환하여 넣어도 보았으나 putty에서는 잘 되고 mobaXterm으로만 안된다는 사실 발견
    - mobaXterm을 21.0에서 21.1로 바꾸자 작동하기 시작함… 왜?
        - [https://ccc.mobatek.net/MobaXterm_Changelog.txt](https://ccc.mobatek.net/MobaXterm_Changelog.txt)
        - 혹시 이거?
            - `- Improvement: if your SSH authentication uses an ECDSA, ED25519, or RSA-SHA2 key, the SSH-browser can now use the SFTP protocol`
- 22.10.24
    - ec2에서 docker compose up을 시도했다가 멸망했다.
        - cpu 퍼센티지가 99%를 찍고 내려올 기미가 없다.
        - 1시간 이상 기다렸다가 안되어서 명령 취소.
        - 그 뒤에도 인스턴스가 맛이 갔는지 매우 느려져서 재시작을 해야만 했다.
    - ec2 프리티어의 t2.micro는 램이 매우 작다고 한다.
        - [AWS EC2 npm build 퍼센트 안 넘어갈 때, 멈출 때 (tistory.com)](https://dundung.tistory.com/284)
        - [AWS EC2 프리티어에서 메모리 부족현상 해결방법 (tistory.com)](https://sundries-in-myidea.tistory.com/102)
        - 보통 스왑 메모리를 사용해서 해결하는 것을 추천한다.
- 22.10.31
    
    EC2 fastapi에 기록된 희안한 api 요청
    
    ![image](https://user-images.githubusercontent.com/20199960/204205526-93b03a65-abe2-405b-ad09-a8c73da6d7fe.png)
    
    - [https://packetstormsecurity.com/files/166334/Hikvision-IP-Camera-Backdoor.html](https://packetstormsecurity.com/files/166334/Hikvision-IP-Camera-Backdoor.html)
    - ip카메라 취약점을 활용한 백도어 시도인듯하다.
- 22.11.21
    
    react native 앱을 expo로 배포할때…
    
    expo notification으로 알림을 보낼때 쓰는 token의 validation이 빌드 환경에 따라 달라지더라
    
    정확히는 빌드할때 쓰는 expo 계정에 따라 달라지는듯 → ?
    
    - 공지사항을 보낼때만 알림이 안뜸 → 공지사항은 faq에 비해 많은 유저들에게 알림을 보냄 → 토큰에 뭔가 문제가 있지 않을까?(이것을 확정하기 위해 사이사이에 수많은 print를 해보았다.)→ 안드로이드에서 생성한 토큰만 문제가 있었다.(이것을 확인하기 위해 많은 토큰이 지워졌다.)→ 왜일까? SDK가 달라서?→ 컴퓨터가 다르고 expo 계정도 다르다 카더라
    
    크로스 플랫폼의 빌드환경 통일에 대해 생각해볼만한 이슈였다.
    
    체계적인 디버깅 방법에 대해서도..
    
- 22.11.24
    
    리액트+github page를 활용한 개인 사이트 제작중.. github api가 이전의 값을 반복하는 현상이 생겼다.
    
    게시물을 삭제했는데 repo tree 조회에서는 아직 존재하는 것으로 나오는 현상.
    
    당연히 api쪽이 잘못되었을 가능성은 적으니 (repo에서 확인했을때에는 없어진것으로 표시됨) 개발자도구의 네트워크 항목을 확인했을때 이상한 문구를 발견했다.
    
    ![image](https://user-images.githubusercontent.com/20199960/204205462-950a6615-67db-4c6f-8d85-399584aa47ce.png)
    
    api값이 아니라 캐시된 데이터를 가져오는 상황이었다.
    
    - 해결법: [https://jw910911.tistory.com/124](https://jw910911.tistory.com/124)

- 22.11.28
    
    깃허브를 사용한 블로그를 계획하던 중..
    
    - 게시물들을 public asset이 아니라 깃허브 repo에서 읽어오는 방식으로 하고 싶었다.
    - 그래서 github api를 활용한 방식으로 별도의 브랜치에 저장해두고 파일과 트리를 읽어오는 방식을 택했는데..
    - api call limit이 생각보다 빨리 찾아온다. 요청 ip에 대한 한계인듯 해서 아직은 괜찮다고 생각하지만, repo에 limit이 걸려있다면 개인용으로는 몰라도 여기저기 공개할수는 없을듯.